---
trigger: always_on
---

# Article III: Context-Engineered Development Workflow

**Authority**: Establishes workflow foundation. See Article III-A for detailed implementation protocols.

## 8-Schema Context System (59% Optimized)

**Core Schemas**: activeContext, scratchpad, kanban, mistakes, systemPatterns, progress, roadmap, memory

**Features**: AegisKG local knowledge graph, SQLite session context, Context7 source prioritization, MCP validation state

**Performance**: 2.6x faster JSON parsing, 65% memory optimization, ≤10KB/file

**MCP Auto-Trigger**: All workflows auto-activate MCPs autonomously. See Article III-A for complete matrix.

## Context Engineering Principles

**Attention Budget**: n² token capacity with intelligent curation
**Event-Driven**: Immutable streams with rollback snapshots
**Tool-Context Feedback**: MCP auto-enriches schemas
**Signal-to-Noise**: Context rot prevention via AegisKG patterns

**Attention Allocation**: scratchpad 30%, activeContext 25%, mistakes 20%, systemPatterns 10%, progress 10%, roadmap 5%

## Schema Maintenance

**Size Management**: ≤10KB per schema with auto-cleanup via @mcp:math + @mcp:memory
**Validation**: @mcp:filesystem auto-validation against schemas with @mcp:context7 error resolution
**Health Monitoring**: Signal compression, AegisKG preservation, Context7 source prioritization

## Core Commands

**`/init`**: Auto-detect → restore OR generate 8 schemas → enable workflow
**`/next`**: Read scratchpad → VALIDATE → Execute → Update schemas → AUTO-CONTINUE
**`/update`**: Refresh 8 schemas with MCP integration
**`/validate`**: Run compliance checks → Report status
**`/fix`**: HALT-FIX-VALIDATE loop via @mcp:context7
**`/status`**: Report tasks, progress, consensus metrics
**`/optimize`**: Analyze patterns → propose improvements (>95% consensus)
**`/health`**: Monitor attention, context rot, schema integrity

## "next" Workflow

```
1. Calculate attention budget
2. Read scratchpad.json (primary) or kanban.json
3. Dynamic context loading with AegisKG
4. VALIDATE → EXECUTE
5. Update 8 essential schemas via MCP
6. Create AegisKG snapshot
7. AUTO-LOAD next task
8. Continue until completion
```

**CRITICAL**: Auto-continues without permission. JSON-first with schema validation.

## "init" Workflow

```
1. Scan .windsurf/memory-bank/ + load schemas
2. IF 8 schemas exist: Validate → Load with AegisKG → Resume → Auto-trigger 'next'
3. IF missing schemas: HALT → Regenerate → Validate → Continue
4. IF no memory-bank: Auto-detect project type
   - New: Generate from description → Parliamentary approval
   - Existing: MD migration if needed → Codebase analysis → Schema generation
5. VERIFICATION: Confirm 8 essential schemas → Enable autonomous workflow
```

**Rules**: Single command for both new/existing projects. Schema validation mandatory. Complete 7-schema structure required before enabling autonomous mode.


## Workflow Loop

```
Context Assembly → MCP Enrichment → Validation → Tri-Branch Review → 
>95% Consensus → EXECUTE → Post-Validation → 7-Schema Update → 
Context Rot Detection → Load Next → REPEAT CONTINUOUSLY
```

**CRITICAL**: 0-98% autonomy auto-continues until completion.

## Core Capabilities

- Attention optimization with dynamic tokens
- Context rot prevention via n² monitoring  
- Event-driven updates with immutable snapshots
- Tool-context feedback through MCP enrichment
- Signal-to-noise efficiency measurement
- Quality gates with tri-branch validation
- Autonomous MCP integration
- Multi-language auto-detection

## Error Resolution

**Protocol**: Error detected → @mcp:context7 instant call → get-library-docs → auto-fix → @mcp:memory pattern storage → validation → 100% clean before continue

**Tool-Context Loop**: All MCPs auto-enrich schemas with reusable patterns.

## Constitutional Integration

**Authority Structure**: Article III establishes workflow foundation. Article III-A governs detailed execution protocols.

**Implementation Details**: See Article III-A for complete protocols including context assembly, MCP-based updates, validation checkpoints, and schema health monitoring.

**Compliance**: Unified constitutional authority with >95% consensus requirements and mandatory 7-schema validation.
