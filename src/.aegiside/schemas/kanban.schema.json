{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://aegiside.org/schemas/kanban.json",
  "title": "Kanban Schema",
  "$defs": {
    "proposal_id": {"type": "string", "pattern": "^proposal-[A-Za-z0-9_-]+$"},
    "kanban_task_id": {"type": "string", "pattern": "^task-[A-Za-z0-9_-]+$"},
    "roadmap_milestone_id": {"type": "string", "pattern": "^rm-[A-Za-z0-9_-]+$"},
    "governance_decision_id": {"type": "string", "pattern": "^gd-[A-Za-z0-9_-]+$"}
  },
  "description": "Workflow management with todo, in_progress, done columns + metrics synced FROM progress.json",
  "type": "object",
  "required": ["schema_version", "last_updated", "metrics", "columns"],
  "properties": {
    "schema_version": {
      "type": "string",
      "pattern": "^\\d+\\.\\d+\\.\\d+$"
    },
    "last_updated": {
      "type": "string",
      "format": "date-time"
    },
    "metrics": {
      "type": "object",
      "description": "SYNCED FROM progress.json after every task",
      "required": ["total_rl_score", "tasks_completed"],
      "properties": {
        "total_rl_score": {"type": "number"},
        "tasks_completed": {"type": "integer", "minimum": 0},
        "tasks_failed": {"type": "integer", "minimum": 0},
        "commits": {"type": "integer", "minimum": 0}
      }
    },
    "columns": {
      "type": "object",
      "properties": {
        "todo": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "id": {"type": "string"},
              "title": {"type": "string"},
              "priority": {"type": "string"},
              "tags": {"type": "array", "items": {"type": "string"}},
              "added_at": {"type": "string", "format": "date-time"}
            }
          }
        },
        "in_progress": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "id": {"type": "string"},
              "title": {"type": "string"},
              "priority": {"type": "string"},
              "tags": {"type": "array", "items": {"type": "string"}},
              "started_at": {"type": "string", "format": "date-time"}
            }
          }
        },
        "done": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "id": {"type": "string"},
              "title": {"type": "string"},
              "completed_at": {"type": "string", "format": "date-time"},
              "tags": {"type": "array", "items": {"type": "string"}},
              "rl_impact": {"type": "number"},
              "cost_savings": {"type": "string"}
            }
          }
        }
      }
    }
  }
}
